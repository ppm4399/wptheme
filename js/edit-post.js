!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";jQuery((function(t){t("#j-form").on("click",".j-thumb",(function(){var e;e||(e=wp.media.frames.file_frame=wp.media({title:"\u9009\u62e9\u56fe\u7247",button:{text:"\u63d2\u5165\u56fe\u7247"},library:{type:"image"},multiple:!1})).on("select",(function(){var a=e.state().get("selection").first().toJSON(),i='<img src="'+a.url+'" width="'+a.width+'" height="'+a.height+'"><div class="thumb-remove j-thumb-remove"></div>';t("#j-thumb-wrap").html(i),t("#_thumbnail_id").val(a.id)})),e.open()})).on("click",".j-thumb-remove",(function(){t("#j-thumb-wrap").html(""),t("#_thumbnail_id").val("")})).on("submit",(function(){var e=t(this).find("button[type=submit]");if(e.hasClass("loading"))return!1;e.loading(1);var a=0;(t("#post-tags").remove(),t("<input>",{type:"hidden",name:"post-tags",id:"post-tags",val:t("#tag-container").tagHandler("getSerializedTags")}).appendTo(this),"undefined"!=typeof tinyMCE)&&(tinyMCE.triggerSave(),tinyMCE.activeEditor.off("change").on("change",(function(e){t(".wp-editor-wrap").removeClass("error")})));var i=t.trim(t("#post-title").val()),n=t.trim(t("#post-content").val());return""==i&&(t("#post-title").addClass("error"),a=1),""==n&&(t(".wp-editor-wrap").addClass("error"),a=1),0===t('input[name="post-category[]"]').length&&(t(".pf-cat-inner").addClass("error"),a=1),a?(e.loading(0),!1):void 0})).on("input propertychange",".form-control",(function(){t(this).removeClass("error")})).on("click",".pf-cat-list",(function(e){if(t(e.target).closest(".pf-cat-item").length)return!1;t(this).closest(".pf-cat-inner").addClass("active")})).on("click",".pf-cat-select-item",(function(){var e=t(this),a=e.closest(".pf-cat-inner"),i=e.data("value"),n=e.text().trim();0===a.find(".pf-cat-item[data-value="+i+"]").length&&(a.find(".pf-cat-placeholder").remove(),a.find(".pf-cat-list").append('<span class="pf-cat-item" data-value="'+i+'">'+n+'<i class="close"></i><input type="hidden" name="post-category[]" value="'+i+'"></span>'),a.removeClass("error")),a.removeClass("active")})).on("click",".pf-cat-item .close",(function(){var e=t(this).parent(),a=e.parent();e.remove(),0===a.find(".pf-cat-item").length&&a.append('<span class="pf-cat-placeholder">\u8bf7\u9009\u62e9\u6587\u7ae0\u5206\u7c7b</span>')})),t(document).on("click",(function(e){0===t(e.target).closest(".pf-cat-inner").length&&t(".pf-cat-inner").removeClass("active")}));var e=t("#post-category");if(e.length){var a="";e.find("option").each((function(e,i){var n=t(i);a+='<li class="pf-cat-select-item" data-value="'+n.attr("value")+'">'+n.text()+"</li>"})),a=a||'<li class="pf-cat-select-item pf-cat-select-item-empty">\u6682\u65e0\u9009\u9879</li>',t("ul.pf-cat-select").html(a)}t("#tag-container").tagHandler({assignedTags:postTags})}))}));
