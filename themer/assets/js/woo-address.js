!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){this.$body=jQuery(document.body),this.init()}t.prototype={init:function(){var t=this;this.city_select_select2(),this.city_select_select2(1),jQuery("select.country_to_state, input.country_to_state").trigger("change");var e=wc_cities_select_params.cities.replace(/&quot;/g,'"'),n=JSON.parse(e);t.$body.on("country_to_state_changing",(function(e,n,i){var c,a=wc_address_i18n_params.locale.replace(/&quot;/g,'"'),r=JSON.parse(a),o=i;c=void 0!==r[n]?r[n]:r.default;var s=JSON.parse(wc_address_i18n_params.locale_fields);jQuery.each(s,(function(t,e){var n=o.find(e),i=jQuery.extend(!0,{},r.default[t],c[t]);Array.isArray(i.label_class)&&n.find("label").length&&n.find("label").attr("class",i.label_class.join(" "))}));var _=i.find("#billing_state, #shipping_state, #calc_shipping_state").val();t.$body.trigger("state_changing",[n,_,i])})).on("change","select.state_select, #calc_shipping_state",(function(){var e=jQuery(this).closest("div"),n=e.find("#billing_country, #shipping_country, #calc_shipping_country").val(),i=jQuery(this).val();t.$body.trigger("state_changing",[n,i,e])})).on("change","select.city_select, #calc_shipping_city",(function(){var e=jQuery(this).closest("div"),n=e.find("#billing_country, #shipping_country, #calc_shipping_country").val(),i=e.find("#billing_state, #shipping_state, #calc_shipping_state").val(),c=jQuery(this).val();t.$body.trigger("city_changing",[n,i,c,e])})).on("state_changing",(function(e,i,c,a){var r=a.find("#billing_city, #shipping_city, #calc_shipping_city");n[i]?n[i]instanceof Array?t.cityToSelect(r,n[i]):c?n[i][c]?t.cityToSelect(r,n[i][c]):t.cityToInput(r):t.disableCity(r):t.cityToInput(r),t.$body.trigger("city_changing",[i,c,r.val(),a])})).on("city_changing",(function(e,i,c,a,r){var o=r.find("#billing_address_1, #shipping_address_1, #calc_shipping_address_1");n[i]&&n[i][c]?n[i][c]instanceof Array?t.cityToSelect(o,n[i][c],1):c&&a?n[i][c][a]?t.cityToSelect(o,n[i][c][a],1):t.cityToInput(o):t.disableCity(o):n[i]?t.disableCity(o):t.cityToInput(o)})).on("city_to_select",(function(){t.city_select_select2()})).on("district_to_select",(function(){t.city_select_select2(1)}))},city_select_select2:function(t){if(jQuery().select2){var e=this;t=t?"district":"city",jQuery("select."+t+"_select:visible").each((function(){var t=jQuery.extend({placeholderOption:"first",width:"100%"},e.getEnhancedSelectFormatString());jQuery(this).select2(t)}))}},cityToInput:function(t){if(t.is("input"))t.prop("disabled",!1);else{var e=t.attr("name"),n=t.attr("id"),i=t.attr("placeholder");i=i||"",t.parent().find(".select2-container").remove(),t.replaceWith('<input type="text" class="input-text" name="'+e+'" id="'+n+'" placeholder="'+i+'" />')}},disableCity:function(t){t.val("").change(),t.prop("disabled",!0)},cityToSelect:function(t,e,n){var i=t.val();if(n=n?"district":"city",t.is("input")){var c=t.attr("name"),a=t.attr("id"),r=t.attr("placeholder");r=r||"",t.replaceWith('<select name="'+c+'" id="'+a+'" class="'+n+'_select" placeholder="'+r+'"></select>'),t=jQuery("#"+a)}else t.prop("disabled",!1);var o="";for(var s in e)if(e.hasOwnProperty(s)){var _=Array.isArray(e[s])?s:e[s];o=o+'<option value="'+_+'">'+_+"</option>"}t.html('<option value="">'+wc_cities_select_params.i18n_select_city_text+"</option>"+o),jQuery('option[value="'+i+'"]',t).length?t.val(i).change():t.val("").change(),this.$body.trigger(n+"_to_select")},getEnhancedSelectFormatString:function(){return{formatMatches:function(t){return 1===t?wc_country_select_params.i18n_matches_1:wc_country_select_params.i18n_matches_n.replace("%qty%",t)},formatNoMatches:function(){return wc_country_select_params.i18n_no_matches},formatAjaxError:function(){return wc_country_select_params.i18n_ajax_error},formatInputTooShort:function(t,e){var n=e-t.length;return 1===n?wc_country_select_params.i18n_input_too_short_1:wc_country_select_params.i18n_input_too_short_n.replace("%qty%",n)},formatInputTooLong:function(t,e){var n=t.length-e;return 1===n?wc_country_select_params.i18n_input_too_long_1:wc_country_select_params.i18n_input_too_long_n.replace("%qty%",n)},formatSelectionTooBig:function(t){return 1===t?wc_country_select_params.i18n_selection_too_long_1:wc_country_select_params.i18n_selection_too_long_n.replace("%qty%",t)},formatLoadMore:function(){return wc_country_select_params.i18n_load_more},formatSearching:function(){return wc_country_select_params.i18n_searching}}}},jQuery((function(e){new t}))}));
